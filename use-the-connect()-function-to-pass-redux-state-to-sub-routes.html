<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>use-the-connect()-function-to-pass-redux-state-to-sub-routes</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/c7859b4f-a0e9-4f74-8559-62f43bdcabea.jpeg" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Gaurav Singhal</p>
<h1 id="use-the-connect-function-to-pass-redux-state-to-sub-routes">Use the connect() Function to Pass Redux State to Sub-routes</h1>
<h3 id="gaurav-singhal">Gaurav Singhal</h3>
<ul>
<li><p>Oct 16, 2020</p></li>
<li><p>7 Min read</p></li>
<li><p>4,407 Views</p></li>
<li><p>Oct 16, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">7 Min</span> read</p></li>
<li><p>4,407 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Front End Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Client-side Frameworks</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">React</span></p>
<p>Introduction</p>
<p>9</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-createreduxstatewithstore" class="menu-link">Create Redux State with Store</a></li>
<li><a href="#module-accessingreduxstatetothesubroutes" class="menu-link">Accessing Redux State to the Sub-routes</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>React uses a component state that can be modified into the component and pass it to the child component as it gets connected to the parent. Still, this state is not sufficient to manage the state if components are not interrelated.</p>
<p>Redux is a library that allows a React app to create a global state object that can be used in any component across the app by consuming the state object. A Redux state is a standalone object managed globally in the React app. Thus, every route and sub-route should be able to access the global state piece, which is possible using the <span class="jsx-3120878690"><code>connect()</code></span> method. This guide will demonstrate how any app sub-route can access the Redux state.</p>
<h2 id="create-redux-state-with-store">Create Redux State with Store</h2>
<p>Before any component, access the Redux state object. The first step is to create the store that will represent the combined state object used by the various components in the React app.</p>
<p>Two libraries need to get installed to configure the store and routes.</p>
<pre><code>1npm install react-redux
2npm install react-router-dom</code></pre>
<p>shell</p>
<p>Then, configure the router along with the route.</p>
<pre><code>1import { Route, Switch,  BrowserRouter as Router } from &#39;react-router-dom&#39;;</code></pre>
<p>jsx</p>
<p>After importing the router, you need to configure various routes related to your components.</p>
<pre><code>1class AppRoutes extends React.Component {
2    render() {
3        return (
4            &lt;Switch&gt;
5                &lt;Route exact path={&#39;/&#39;} component={Home} /&gt;
6                &lt;Route path={&#39;/screen1&#39;} component={Screen1} /&gt;
7                &lt;Route path={&#39;/screen2&#39;} component={Screen2} /&gt;
8                &lt;Route path={&#39;/screen3&#39;} component={Screen3} /&gt;
9                &lt;Route component={NotFoundPage} /&gt;
10            &lt;/Switch&gt;
11        );
12    }
13}</code></pre>
<p>jsx</p>
<p>Based on the routes, if any component wants to access the Redux state, the store needs to be configured. Below is the code to create the store.</p>
<pre><code>1// To use createStore function
2import { createStore } from &#39;redux&#39;;
3
4const store = createStore(contactApp);</code></pre>
<p>jsx</p>
<p>The store then is assigned to the <span class="jsx-3120878690"><code>&lt;Provider&gt;</code></span>, which allows any component to access the global state object.</p>
<pre><code>1&lt;Provider store={store}&gt;
2    &lt;Switch&gt;
3        &lt;Route exact path={&#39;/&#39;} component={Home} /&gt;
4        &lt;Route path={&#39;/screen1&#39;} component={Screen1} /&gt;
5        &lt;Route path={&#39;/screen2&#39;} component={Screen2} /&gt;
6        &lt;Route path={&#39;/screen3&#39;} component={Screen3} /&gt;
7        &lt;Route component={NotFoundPage} /&gt;
8    &lt;/Switch&gt;
9&lt;/Provider&gt;</code></pre>
<p>jsx</p>
<p>The provider has one property called <span class="jsx-3120878690"><code>store</code></span> that defines the store and makes Redux states available across the app. Your app is configured to access the Redux state object by implementing a router along with the Redux store. Now you can access any piece of state using the <span class="jsx-3120878690"><code>connect()</code></span> function.</p>
<h2 id="accessing-redux-state-to-the-sub-routes">Accessing Redux State to the Sub-routes</h2>
<p>After configuring the store with the provider you can access the state object, but it can be done directly; hence, the Redux’s additional functionality gets used.</p>
<p>React Redux has one additional feature called <span class="jsx-3120878690"><code>connect()</code></span> that allows you to connect your React component with the Redux store. The <span class="jsx-3120878690"><code>connect()</code></span> function has four different props:</p>
<ul>
<li>mapStateToProps</li>
<li>mapDispatchToProps</li>
<li>mergeProps</li>
<li>options</li>
</ul>
<p>You can use the props <span class="jsx-3120878690"><code>mapStateToProps</code></span> to extract the global state and use it into the existing component. For example, one form adds the contact and another component, which shows the contact list; hence, the form component is a parent, and the list component is a child component.</p>
<h3 id="app.js">App.js</h3>
<pre><code>1render() {
2    return (
3      &lt;&gt;
4        &lt;h1&gt;CONTACT APP&lt;/h1&gt;
5        &lt;section&gt;
6          &lt;section&gt;
7            &lt;input
8              type=&quot;text&quot;
9              name=&quot;message&quot;
10              placeholder=&quot;Name&quot;
11              value={this.state.inputs.message}
12              onChange={this.onInput}
13            /&gt;
14            &lt;button onClick={this.addContact}&gt;ADD&lt;/button&gt;
15          &lt;/section&gt;
16        &lt;/section&gt;
17        &lt;hr /&gt;
18        &lt;TodoList /&gt;
19      &lt;/&gt;
20    );
21}</code></pre>
<p>js</p>
<p>One input control is used to add the contact name. Once the user submits the contact, the action method should look like this.</p>
<pre><code>1addContact = () =&gt; {
2    // Dispatching the action
3    this.props.addContact(this.state.inputs.message);
4};</code></pre>
<p>js</p>
<p>There is an action called <span class="jsx-3120878690"><code>addContact()</code></span> that takes the contact name as a value and will pass it to the action invocation function, but <span class="jsx-3120878690"><code>mapDispatchToProps</code></span> will be used in this example.</p>
<pre><code>1const mapDispatchToProps = dispatch =&gt; {
2  return {
3    addContact: contact =&gt; dispatch(addContact(contact))
4  };
5};</code></pre>
<p>js</p>
<p>So far, you have created a straightforward form and invoked the Redux action, but you don’t have any component to show the added list of contacts.</p>
<p>For that, create one additional component, as demonstrated below.</p>
<h3 id="contactlist.jsx">ContactList.jsx</h3>
<pre><code>1import React, { Component } from &quot;react&quot;;
2import { connect } from &quot;react-redux&quot;;
3
4class ContactList extends Component {
5
6  renderContacts = () =&gt; {
7    return this.props.contacts.contacts.map((contact, i) =&gt; (
8      &lt;section key={i}&gt;
9        &lt;div&gt;
10          &lt;p className=&quot;flex&quot;&gt;{contact}&lt;/p&gt;
11        &lt;/div&gt;
12      &lt;/section&gt;
13    ));
14  };
15
16  render() {
17    return (
18      &lt;&gt;
19        &lt;section&gt;
20          &lt;section&gt;
21            &lt;h2&gt;CONTACTS&lt;/h2&gt;
22            &lt;hr /&gt;
23            {this.props.contacts.contacts &amp;&amp;
24            this.props.contacts.contacts.length &gt; 0 ? (
25              this.renderContacts()
26            ) : (
27              &lt;span&gt;Contacts not found&lt;/span&gt;
28            )}
29          &lt;/section&gt;
30        &lt;/section&gt;
31      &lt;/&gt;
32    );
33  }
34}
35
36const mapStateToProps = state =&gt; ({ contacts: state.contacts })
37
38export default connect(mapStateToProps)(ContactList);</code></pre>
<p>jsx</p>
<p>In the above component, there is a function created called <span class="jsx-3120878690"><code>renderContacts()</code></span> that is using <span class="jsx-3120878690"><code>this.props.contact</code></span>. This means the data that is coming from the global state object is consumed in the child component.</p>
<p>The below statement is crucial, and extracts the required state from the store.</p>
<pre><code>1const mapStateToProps = state =&gt; ({ contacts: state.contacts })</code></pre>
<p>jsx</p>
<p>In the above statement, <span class="jsx-3120878690"><code>state.contacts</code></span> contains a piece of the global state object and is assigned to the local props called <span class="jsx-3120878690"><code>contacts</code></span>, so when you want to access the contacts from the global state, you can use <span class="jsx-3120878690"><code>this.props.contacts</code></span> from the existing component.</p>
<p>The last step is to assign <span class="jsx-3120878690"><code>mapStateToProps</code></span> to the <span class="jsx-3120878690"><code>connect()</code></span> function so that the props will find the suitable state object from the state.</p>
<pre><code>1export default connect(mapStateToProps)(TodoList);</code></pre>
<p>jsx</p>
<h2 id="conclusion">Conclusion</h2>
<p>The Redux library allows us to implement global state objects accessible from any component across the app; thus, the <span class="jsx-3120878690"><code>connect()</code></span> function enables any sub-routes to in your app to extract the required state object from the store.</p>
<p>9</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
