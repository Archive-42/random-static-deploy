<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>using-git-submodules-to-reference-one-git-repository-from-another</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/7aa57bc1-6266-4719-a497-c3ab18a28f5d.png" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Benney Au</p>
<h1 id="using-git-submodules-to-reference-one-git-repository-from-another">Using Git Submodules to Reference One Git Repository from Another</h1>
<h3 id="benney-au">Benney Au</h3>
<ul>
<li><p>Oct 7, 2020</p></li>
<li><p>4 Min read</p></li>
<li><p>5,721 Views</p></li>
<li><p>Oct 7, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">4 Min</span> read</p></li>
<li><p>5,721 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">IT Infrastructure</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">GitHub</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">DevOps Tools and Methodologies</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Source Control Management</span></p>
<p>Introduction</p>
<p>18</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-setuptherepository" class="menu-link">Set Up the Repository</a></li>
<li><a href="#module-addavimpluginusinggitsubmodule" class="menu-link">Add a VIM Plugin Using Git Submodule</a></li>
<li><a href="#module-updategitsubmodules" class="menu-link">Update Git Submodules</a></li>
<li><a href="#module-initializegitsubmodules" class="menu-link">Initialize Git Submodules</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>When a code project becomes large in scope, it typically depends on external code that other teams or individuals have written. There are a few ways to incorporate external code into your own repository. A previous guide, <a href="https://app.pluralsight.com/guides/reference-one-git-repository-from-another">Referencing One Git Repository from Another</a>, covered how to use <span class="jsx-3120878690"><code>git subtree</code></span> commands to nest one or many repositories inside another. Using <em>Git submodules</em> is an alternative way to incorporate a snapshot of one repository inside another. It can help you keep these repositories in sync without tedious and error-prone copy-pasting.</p>
<p>This guide covers this alternative approach using Git submodules and discusses how to perform some common operations with them.</p>
<h3 id="dotfiles-example-use-case">Dotfiles Example Use Case</h3>
<p>This guide will use the same dotfiles example repository discussed in <a href="https://app.pluralsight.com/guides/reference-one-git-repository-from-another">Referencing One Git Repository from Another</a> to illustrate the topic.</p>
<h2 id="set-up-the-repository">Set Up the Repository</h2>
<p>To get started using <span class="jsx-3120878690"><code>git submodules</code></span>, initialize a repository in the usual way by creating a folder and committing it.</p>
<pre><code>1cd ~
2mkdir dotfiles
3cd dotfiles
4git init
5touch readme.md
6git add . &amp;&amp; git commit -m &quot;initial commit&quot;</code></pre>
<h2 id="add-a-vim-plugin-using-git-submodule">Add a VIM Plugin Using Git Submodule</h2>
<p>With the root or parent repository created, we can start referencing other repositories using the <span class="jsx-3120878690"><code>git submodule</code></span> command.</p>
<p>Run the following command:</p>
<pre><code>1git submodule add [email protected]:tpope/vim-dispatch.git vim/pack/start/dispatch -b main</code></pre>
<p>This command adds the submodule and creates a new <span class="jsx-3120878690"><code>vim</code></span> folder in your root repository. It is similar to the <span class="jsx-3120878690"><code>git subtree</code></span> command where you specify the remote repository you would like to clone, the location where you would like it saved, and the branch you want to track.</p>
<p>One difference, however, from the <span class="jsx-3120878690"><code>git subtree</code></span> is that a new <span class="jsx-3120878690"><code>.gitmodules</code></span> file has also been created at the root. Its contents are displayed below. It is a mapping file between local submodules’ location and their remote repository.</p>
<pre><code>1[submodule &quot;vim/pack/start/dispatch&quot;]
2        path = vim/pack/start/dispatch
3        url = [email protected]:tpope/vim-dispatch.git</code></pre>
<p>These changes are not committed automatically, so you will have to separately commit them.</p>
<pre><code>1git add .
2git commit -m &quot;added vim dispatch submodule&quot;</code></pre>
<h2 id="update-git-submodules">Update Git Submodules</h2>
<p>As the repositories you want to nest are updated with new features and bug fixes, you will want to incorporate them into your <span class="jsx-3120878690"><code>dotfiles</code></span>. One small advantage of submodules over subtrees is that updating one or many repositories is simpler.</p>
<p>With submodules, you can automatically update all nested repositories with one command.</p>
<pre><code>1git submodule update --remote --merge</code></pre>
<p>This will iterate through your <span class="jsx-3120878690"><code>.gitmodules</code></span> file and pull the latest commits against the specified tracked branch. If there are updates, they won’t be committed to the repository yet. This is useful since it gives you an opportunity to test the new code before committing to your own repository.</p>
<p>In contrast, when using <span class="jsx-3120878690"><code>git subtree</code></span>, you will need to run the <span class="jsx-3120878690"><code>git subtree pull</code></span> command for each nested repository or manually set up a script to do this. This can be tedious if you have several nested repositories.</p>
<h2 id="initialize-git-submodules">Initialize Git Submodules</h2>
<p>Finally, as you switch computers, you will want to clone your <span class="jsx-3120878690"><code>dotfiles</code></span> repositories onto them, and you will also want the submodules. However, to do this, you need to run an additional command or pass a separate flag. <span class="jsx-3120878690"><code>git clone [repo]</code></span> is insufficient.</p>
<p>If you haven’t cloned your repository, remember to specify the <span class="jsx-3120878690"><code>--recursive</code></span> flag:</p>
<pre><code>1git clone --recursive [email protected]:chinwobble/dotfiles.git</code></pre>
<p>If the repository is already cloned, run the <span class="jsx-3120878690"><code>git submodule update</code></span> command:</p>
<pre><code>1git submodule update --init --recursive</code></pre>
<p>This is one of the major disadvantages of <span class="jsx-3120878690"><code>git submodules</code></span>. It requires other users of your repository to perform extra actions that they wouldn’t normally need to perform.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Git submodules are another way to leverage Git as an external dependency management tool. Submodules have an additional learning curve over <span class="jsx-3120878690"><code>git subtree</code></span> for your team, so it’s important to consider whether your project actually needs them.</p>
<p>18</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
