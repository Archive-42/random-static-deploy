<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>reference-one-git-repository-from-another</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/7aa57bc1-6266-4719-a497-c3ab18a28f5d.png" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Benney Au</p>
<h1 id="referencing-one-git-repository-from-another">Referencing One Git Repository from Another</h1>
<h3 id="benney-au">Benney Au</h3>
<ul>
<li><p>Sep 28, 2020</p></li>
<li><p>5 Min read</p></li>
<li><p>5,167 Views</p></li>
<li><p>Sep 28, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">5 Min</span> read</p></li>
<li><p>5,167 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">IT Infrastructure</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">GitHub</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">DevOps Tools and Methodologies</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Source Control Management</span></p>
<p>Introduction</p>
<p>9</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-dotfilesexampleusecase" class="menu-link">Dotfiles Example Use Case</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In a large organization, you may have dozens or even hundreds of Git repositories. These repositories may have common configuration and scripts, or you may be working in a C++ project where you need to compile several repositories from source code. How do you achieve this without copy-pasting files everywhere?</p>
<p>In this guide, you will learn about <span class="jsx-3120878690"><code>git subtrees</code></span> as a solution to this problem. You will set up a repository and perform some common operations. A basic understanding of the git command line and GitHub is assumed knowledge for this guide. You can watch <a href="https://app.pluralsight.com/library/courses/github-getting-started/table-of-contents">GitHub Getting Started</a> if you need a refresher.</p>
<p><strong>Note:</strong> GitHub is in the process of changing its default branch name from <span class="jsx-3120878690"><code>master</code></span> to <span class="jsx-3120878690"><code>main</code></span>. This guide will use the term <span class="jsx-3120878690"><code>master</code></span> branch since it is the current default branch name at the time of writing. You can learn more about this change by reading <a href="https://github.com/github/renaming">GitHub’s official documentation on renaming the default branch</a>.</p>
<h2 id="dotfiles-example-use-case">Dotfiles Example Use Case</h2>
<p>Over a period of several years, you may find yourself working across dozens of different computers. You can keep the settings consistent across your various machines by creating a Git repository with your settings files saved inside. These settings are usually saved in files prefixed with a dot, e.g., <span class="jsx-3120878690"><code>.vimrc</code></span>, <span class="jsx-3120878690"><code>.bashrc</code></span>, etc. Therefore, this setting repository is named <span class="jsx-3120878690"><code>dotfiles</code></span> by convention. As your <span class="jsx-3120878690"><code>dotfiles</code></span> project progresses, you may want to use scripts and configuration that other people have created. You can leverage and contribute back to the open-source community by referencing these repositories inside your <span class="jsx-3120878690"><code>dotfiles</code></span> using <span class="jsx-3120878690"><code>git subtrees</code></span>.</p>
<p>One common use case is embedding VIM plugins that are published as GitHub repositories into your <span class="jsx-3120878690"><code>dotfiles</code></span> repository.</p>
<h3 id="set-up-the-repository">Set Up the Repository</h3>
<p>To start using <span class="jsx-3120878690"><code>git subtrees</code></span> in this way, first create a <span class="jsx-3120878690"><code>dotfiles</code></span> repository.</p>
<pre><code>1cd ~
2mkdir dotfiles
3cd dotfiles
4git init
5touch readme.md
6git add . &amp;&amp; git commit -m &quot;initial commit&quot;</code></pre>
<p>sh</p>
<p>Note that these are bash commands. If you are on Windows, you can execute them in <span class="jsx-3120878690"><code>git bash</code></span>.</p>
<p>You have created a <span class="jsx-3120878690"><code>dotfiles</code></span> repository with a blank readme file.</p>
<h3 id="add-a-vim-plugin-using-git-subtree">Add a VIM plugin Using Git Subtree</h3>
<p>Within your <span class="jsx-3120878690"><code>dotfiles</code></span> project, create a folder <span class="jsx-3120878690"><code>vim/pack/github/</code></span> to store your plugins. This folder structure is important so that VIM will automatically detect and run the plugin. You will place the contents of other git repositories inside this folder.</p>
<p>To do this, run the <span class="jsx-3120878690"><code>git subtree add</code></span> command.</p>
<pre><code>1git subtree add --prefix vim/pack/github/vim-sensible [email protected]:tpope/vim-sensible.git master --squash</code></pre>
<p>sh</p>
<p>This command will embed the master branch of <a href="https://github.com/tpope/vim-sensible">Tim Pope’s VIM-sensible</a> in your dotfiles. Also note that you used the <span class="jsx-3120878690"><code>--squash</code></span> flag to compress the history. You can run this command several times to embed multiple repositories.</p>
<h3 id="update-your-vim-plugin">Update Your VIM Plugin</h3>
<p>With one or more subtrees, you may want to update to a specific branch or git tag. You can do this by running the <span class="jsx-3120878690"><code>git subtree pull</code></span> command.</p>
<pre><code>1git subtree pull --prefix vim/pack/github/vim-sensible/ [email protected]:tpope/vim-sensible.git master --squash</code></pre>
<p>sh</p>
<p>This creates a new commit and squashes any changes on top your <span class="jsx-3120878690"><code>dotfiles</code></span> repository.</p>
<h3 id="contributing-changes-back-to-the-nested-repositories">Contributing Changes Back to the Nested Repositories</h3>
<p>As a good open-source citizen, when you find and fix bugs you will want to share your fixes with the community. <span class="jsx-3120878690"><code>git subtree</code></span> makes this easy since you don’t need to separately check out that nested repository. To do this, you will perform the following steps: 1. Fork the nested repository, such as <span class="jsx-3120878690"><code>vim-sensible</code></span>, on GitHub. 2. Commit changes in your <span class="jsx-3120878690"><code>dotfiles</code></span> repository. 3. Run the below command to push to your fork.</p>
<pre><code>1git subtree push --prefix vim/pack/github/vim-sensible/ [email protected]:chinwobble/vim-sensible.git issue-xxx</code></pre>
<p>sh</p>
<ol type="1">
<li>Create a pull request on the nested repository</li>
<li>Pull the newest of the remote into your <span class="jsx-3120878690"><code>dotfiles</code></span>.</li>
</ol>
<p>Note that when pushing, you changed the remote to your own fork and you are pushing to a new branch, in the example above, it’s <span class="jsx-3120878690"><code>issue-xxxx</code></span>. If you are working on a GitHub issue, you may want to use the issue number as the branch name.</p>
<h2 id="conclusion">Conclusion</h2>
<p><span class="jsx-3120878690"><code>git subtree</code></span> is a good option to nest one repository in another. It does not require users to learn extra commands to access the nested repositories. You can learn more about this feature by reading <a href="https://docs.github.com/en/github/using-git/about-git-subtree-merges">About Git subtree merges</a>.</p>
<p>9</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
