<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>manipulating-arrays-and-objects-in-state-with-react</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/7fc26c97-d391-471d-819e-0695a0c8c46d.jpg" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Desmond Nyamador</p>
<h1 id="manipulating-arrays-and-objects-in-state-with-react">Manipulating Arrays and Objects in State with React</h1>
<h3 id="desmond-nyamador">Desmond Nyamador</h3>
<ul>
<li><p>Nov 4, 2020</p></li>
<li><p>5 Min read</p></li>
<li><p>51,011 Views</p></li>
<li><p>Nov 4, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">5 Min</span> read</p></li>
<li><p>51,011 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Front End Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Client-side Frameworks</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">React</span></p>
<p>Introduction</p>
<p>44</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-stateinclasscomponents" class="menu-link">State in Class Components</a></li>
<li><a href="#module-stateinfunctionalcomponentshooks" class="menu-link">State in Functional Components (Hooks)</a></li>
<li><a href="#module-manipulatingarrays" class="menu-link">Manipulating Arrays</a></li>
<li><a href="#module-manipulatingobjects" class="menu-link">Manipulating Objects</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>At the heart of every app lies its state. No matter the kind of technology you use, your app relies on some sort of state, be it in-memory, on a physical disc, and so on. In React, every component can handle its own state, which might mean clicking a button or the content of a text input. These components are mostly referred to as <em>smart components</em>, whereas components which do not handle state are referred to as <em>dumb components</em>. In this guide, you’ll learn how to manipulate state with objects and arrays. Sit tight!</p>
<h2 id="state-in-class-components">State in Class Components</h2>
<p>React components can be written as ES6 classes with state handled in the constructor function.</p>
<p>Consider the snippet below. <span class="jsx-3120878690"><code>&lt;MyComponent/&gt;</code></span> has a state object in its constructor function, which is called before the component is rendered. Whenever the state object changes, React calls the render method on <span class="jsx-3120878690"><code>&lt;MyComponent/&gt;</code></span>.</p>
<pre><code>1import React from &#39;react&#39;
2
3class MyComponent extends React.Component {
4 constructor(props){
5     super(props);
6     this.state = { date: new Date(), name: &#39;Kofi&#39;}; 
7 }
8
9    render(){
10        return(
11            &lt;div&gt;
12                       &lt;p&gt; Hello {this.state.name} , it is {this.state.toLocaleTimeString()
13                        &lt;p&gt;Date: {this.state.date.toLocaleDateString()}
14           &lt;/div&gt;
15       )
16   }
17}</code></pre>
<p>jsx</p>
<h2 id="state-in-functional-components-hooks">State in Functional Components (Hooks)</h2>
<p>With the introduction of hooks in React 16.8, functional components can now also handle state in a simplified way. The snippet below is the class-based &lt;<span class="jsx-3120878690"><code>MyComponent/&gt;</code></span> written as a functional component. The <span class="jsx-3120878690"><code>useState</code></span> hook is a function that takes in a default value as a parameter (which can be empty) and returns an array containing the state and a function to update it. Array destructuring is used to extract the values from the result of the <span class="jsx-3120878690"><code>useState</code></span> function call.</p>
<pre><code>1import React, {useState} from &#39;react&#39;;
2
3function MyComponent(){
4
5    const [date, setDate] = useState(new Date())
6 const [name, setName] = useState(&quot;Kofi&quot;);
7
8    return(
9         &lt;div&gt;
10                       &lt;p&gt; Hello {date.name} , it is {date.toLocaleTimeString()
11                        &lt;p&gt;Date: {date.toLocaleDateString()}
12                       &lt;button onClick={setDate(new Date())}&gt;&lt;/button&gt;
13           &lt;/div&gt;
14   )
15}</code></pre>
<p>jsx</p>
<h2 id="manipulating-arrays">Manipulating Arrays</h2>
<p>If you’re integrating your React app with an API, you probably would like to store values obtained from the API call in an array in state without losing previous values the array contained. The spread operator helps you do that easily. Take a close look at the snippet below, which implements the spread operator in <span class="jsx-3120878690"><code>finalArray</code></span> by “spreading” the contents of <span class="jsx-3120878690"><code>oldArray</code></span>.</p>
<pre><code>1const oldArray = [&#39;peter piper&#39;, &#39;picked a pair&#39;]
2
3const finalArray = [...oldArray, &#39;of pickle pepper&#39;]
4
5console.log(finalArray)
6
7// (3) [&quot;peter piper&quot;, &quot;picked a pair&quot;, &quot;of pickle pepper&quot;]</code></pre>
<p>jsx</p>
<p>Using hooks, you can easily apply that to your state array, as shown below. The values can now be used to render a list of paragraph tags using the map function.</p>
<pre><code>1import React, { useState, useEffect } from &#39;react&#39;;
2
3const ProductsPage = () =&gt; {
4  const [productsList, setProductsList] = useState([]);
5  const [isLoading, setisLoading] = useState(true);
6
7  useEffect(() =&gt; {
8    fetch(&#39;http://127.0.0.1:8000/api/v1/products/all&#39;)
9      .then((res) =&gt; res.json())
10      .then((data) =&gt; setProductsList([...data]))
11      .then(setisLoading(false));
12  }, []);
13
14   return (
15    &lt;&gt;
16      &lt;Header /&gt;
17      {isLoading ? (
18        &lt;div className=&#39;spinner-border text-primary&#39; role=&#39;status&#39;&gt;
19          {&#39; &#39;}
20          &lt;span className=&#39;sr-only&#39;&gt;Loading...&lt;/span&gt;{&#39; &#39;}
21        &lt;/div&gt;
22      ) : (
23                productsList.map(product =&gt; {
24                            &lt;p key={product.id}&gt;{product.name}&lt;/p&gt;
25                })
26      )}
27    &lt;/&gt;
28  );
29};
30
31}</code></pre>
<p>jsx</p>
<h2 id="manipulating-objects">Manipulating Objects</h2>
<p>Objects also support the spread operation, just like the code snippet above. Let’s implement the same code with object spread.</p>
<pre><code>1import React, { useState, useEffect } from &#39;react&#39;;
2
3const ProductsPage = () =&gt; {
4  const [productsList, setProductsList] = useState([]);
5  const [isLoading, setisLoading] = useState(true);
6
7  useEffect(() =&gt; {
8    fetch(&#39;http://127.0.0.1:8000/api/v1/products/all&#39;)
9      .then((res) =&gt; res.json())
10      .then((data) =&gt; setProductsList({...data}))
11      .then(setisLoading(false));
12  }, []);
13
14   return (
15    &lt;&gt;
16      &lt;Header /&gt;
17      {isLoading ? (
18        &lt;div className=&#39;spinner-border text-primary&#39; role=&#39;status&#39;&gt;
19          {&#39; &#39;}
20          &lt;span className=&#39;sr-only&#39;&gt;Loading...&lt;/span&gt;{&#39; &#39;}
21        &lt;/div&gt;
22      ) : (
23                Object.keys(productList).map(product =&gt; {
24                            &lt;p key={productList[product].id}&gt;{productList[product].name}&lt;/p&gt;
25                })
26      )}
27    &lt;/&gt;
28  );
29};
30
31}</code></pre>
<p>jsx</p>
<h2 id="conclusion">Conclusion</h2>
<p>And that’s it. You’ve successfully studied the art of state management with objects and arrays. Tackling state-related issues should now be a breeze for you. If you’d like to chat more about this topic, ping me on Twitter <span class="citation" data-cites="DesmondNyamador">[@DesmondNyamador]</span>(https://twitter.com/DesmondNyamador).</p>
<p>44</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
