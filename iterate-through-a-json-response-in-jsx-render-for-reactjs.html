<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>iterate-through-a-json-response-in-jsx-render-for-reactjs</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/c7859b4f-a0e9-4f74-8559-62f43bdcabea.jpeg" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Gaurav Singhal</p>
<h1 id="iterate-through-a-json-response-in-jsx-render-for-react">Iterate Through a JSON Response in JSX Render for React</h1>
<h3 id="gaurav-singhal">Gaurav Singhal</h3>
<ul>
<li><p>Sep 25, 2020</p></li>
<li><p>7 Min read</p></li>
<li><p>41,094 Views</p></li>
<li><p>Sep 25, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">7 Min</span> read</p></li>
<li><p>41,094 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Front End Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Client-side Frameworks</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">React</span></p>
<p>Introduction</p>
<p>38</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-fetchingdatausingfetch" class="menu-link">Fetching Data Using fetch()</a></li>
<li><a href="#module-renderingdatawithjsx" class="menu-link">Rendering Data With JSX</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>One of the advantages of React is that you can quickly generate HTML chunks using the JSX template system. Looping and presenting the data is a ubiquitous part of building apps with React. Iterating over an array of objects and rendering the data with JSX is one of the most fundamental and crucial things you need to be able to do before moving on to a real-world project.</p>
<p>When building scalable web apps, you will have to handle JSON responses and display them on a web page. This guide will teach you how to loop over an array of objects and render each item’s information in React.</p>
<h2 id="fetching-data-using-fetch">Fetching Data Using fetch()</h2>
<p>The first step is to fetch data from an external service. For this example, you can use the <a href="https://randomuser.me/">Random Users</a> API, which will generate a list of random users.</p>
<p>To fetch data from the service, use the browser’s native <span class="jsx-3120878690"><code>fetch</code></span> API. Pass the external URL to the <span class="jsx-3120878690"><code>fetch</code></span> method and it will return a promise, so you need to chain the <span class="jsx-3120878690"><code>then()</code></span> methods.</p>
<pre><code>1let users = [];
2fetch(`https://randomuser.me/api/?results=10`)
3  .then((res) =&gt; res.json())
4  .then((data) =&gt; {
5    console.log(data.results);
6  });</code></pre>
<p>js</p>
<p>If you do not want to chain the <span class="jsx-3120878690"><code>then()</code></span> methods, you can use the <span class="jsx-3120878690"><code>async-await</code></span> syntax. Wrap the fetch call in a function and place the <span class="jsx-3120878690"><code>async</code></span> keyword before the function definition. Inside the method, use the <span class="jsx-3120878690"><code>await</code></span> keyword to get the results.</p>
<pre><code>1async function getRandomUsers() {
2  const res = await fetch(`https://randomuser.me/api/?results=10`);
3  const data = await res.json();
4  return data.results;
5}</code></pre>
<p>js</p>
<p>More details on the <span class="jsx-3120878690"><code>fetch</code></span> API are discussed in <a href="get-javascript-objects-from-a-json-file.html">this</a> guide.</p>
<p>Now, create a React component that will fetch random users when the component is mounted. Ideally, the fetch call should be placed in the <span class="jsx-3120878690"><code>componentDidMount</code></span> lifecycle method so the results are ready once the component gets mounted on the page. Once you retrieve the results from fetch, store the user list in the component’s state.</p>
<pre><code>1class UserList extends React.Component {
2  constructor(props) {
3    super(props);
4
5    this.state = {
6      users: [],
7    };
8
9    this.getRandomUsers = this.getRandomUsers.bind(this);
10  }
11
12  async getRandomUsers() {
13    const res = await fetch(`https://randomuser.me/api/?results=10`);
14    const data = await res.json();
15    return data.results;
16  }
17
18  async componentDidMount() {
19    const users = await this.getRandomUsers();
20    this.setState({ users });
21  }
22
23  render() {
24    // ...
25  }
26}</code></pre>
<p>jsx</p>
<h2 id="rendering-data-with-jsx">Rendering Data With JSX</h2>
<p>Create a component that will render an individual user item.</p>
<pre><code>1const User = ({ name, avatar, email }) =&gt; (
2  &lt;div&gt;
3    &lt;img src={avatar} /&gt;
4    &lt;div&gt;
5      &lt;p&gt;{name}&lt;/p&gt;
6      &lt;p&gt;{email}&lt;/p&gt;
7    &lt;/div&gt;
8  &lt;/div&gt;
9);</code></pre>
<p>jsx</p>
<p>Next, iterate over the data using the <span class="jsx-3120878690"><code>map()</code></span> or <span class="jsx-3120878690"><code>forEach()</code></span> methods or using loops.</p>
<h3 id="using-the-map-method">Using the <span class="jsx-3120878690"><code>map()</code></span> Method</h3>
<p>The <span class="jsx-3120878690"><code>map()</code></span> method is the most commonly used function to iterate over an array of data in JSX. You can attach the <span class="jsx-3120878690"><code>map()</code></span> method to the array and pass a callback function that gets called for each iteration. When rendering the <span class="jsx-3120878690"><code>User</code></span> component, pass a unique value to the <span class="jsx-3120878690"><code>key</code></span> prop. The <span class="jsx-3120878690"><code>key</code></span> prop helps React keep track of JSX elements and identify any changes in the array.</p>
<pre><code>1class UserList extends React.Component {
2  constructor(props) {
3    super(props);
4
5    this.state = {
6      users: [],
7    };
8
9    // ...
10  }
11
12  // ...
13
14  render() {
15    return (
16      &lt;div&gt;
17        {this.state.users.map((user) =&gt; (
18          &lt;User
19            name={`${user.name.first} ${user.name.last}`}
20            avatar={user.picture.thumbnail}
21            email={user.email}
22            key={user.id.value}
23          /&gt;
24        ))}
25      &lt;/div&gt;
26    );
27  }
28}</code></pre>
<p>jsx</p>
<h3 id="using-the-traditional-for-loop">Using the Traditional <span class="jsx-3120878690"><code>for</code></span> Loop</h3>
<p>Alternatively, you can also use regular loops like the <span class="jsx-3120878690"><code>for</code></span> loop to render JSX elements.</p>
<p>Create a separate function called <span class="jsx-3120878690"><code>renderUsers()</code></span> in the component. Initialize an empty array to which you push the JSX element for each user.</p>
<p>Run the <span class="jsx-3120878690"><code>for</code></span> loop from index 0 to the length of the user state array.</p>
<pre><code>1for (let i = 0; i &lt; this.state.users.length; i++) {
2  // ...
3}</code></pre>
<p>js</p>
<p>Then, inside the loop body, access the current user as follows:</p>
<pre><code>1let name = `${this.state.users[i].name.first} ${this.state.users[i].name.last}`;
2let avatar = this.state.users[i].picture.thumbnail;
3let email = this.state.users[i].email;</code></pre>
<p>js</p>
<p>Let’s put all this together in the component. Inside the <span class="jsx-3120878690"><code>render()</code></span> method, call the <span class="jsx-3120878690"><code>renderUser()</code></span> method to display the list of users.</p>
<pre><code>1class UserList extends React.Component {
2  constructor(props) {
3    super(props);
4
5    this.state = {
6      users: [],
7    };
8
9    this.renderUsers = this.renderUsers.bind(this);
10
11    // ...
12  }
13
14  function renderUsers() {
15      const userList = [];
16      for(let i = 0; i &lt; this.state.users.length; i++) {
17          let name = `${this.state.users[i].name.first} ${this.state.users[i].name.last}`;
18          let avatar = this.state.users[i].picture.thumbnail;
19          let email = this.state.users[i].email;
20          let key = this.state.users[i].id.value;
21          userList.push(&lt;User name={name} avatar={avatar} email={email} key={key}/&gt;);
22      }
23
24      return userList;
25  }
26
27  // ...
28
29  render() {
30    return &lt;div&gt;{this.renderUsers()}&lt;/div&gt;;
31  }
32}</code></pre>
<p>jsx</p>
<p>As you can see, the <span class="jsx-3120878690"><code>renderUsers()</code></span> method is hard to read; writing such code is generally avoided as it is difficult to debug and maintain.</p>
<h3 id="using-the-foreach-method">Using the <span class="jsx-3120878690"><code>forEach()</code></span> Method</h3>
<p>To make the <span class="jsx-3120878690"><code>renderUsers()</code></span> method more readable, use the <span class="jsx-3120878690"><code>forEach</code></span> method, as shown below. Its usage is similar to the <span class="jsx-3120878690"><code>map()</code></span> method, but the <span class="jsx-3120878690"><code>forEach()</code></span> method does not return anything. This makes it unusable directly inside the <span class="jsx-3120878690"><code>render()</code></span> method, as you need an array to store the individual JSX elements.</p>
<pre><code>1function renderUsers() {
2  const userList = [];
3  this.state.users.forEach((user) =&gt; {
4    let name = `${user.name.first} ${user.name.last}`;
5    let avatar = user.picture.thumbnail;
6    let email = user.email;
7    let key = user.id.value;
8    userList.push(&lt;User name={name} avatar={avatar} email={email} key={key} /&gt;);
9  });
10
11  return userList;
12}</code></pre>
<p>js</p>
<h2 id="conclusion">Conclusion</h2>
<p>As a developer, you must understand your use case and curate solutions according to your requirements. In most cases, the <span class="jsx-3120878690"><code>map()</code></span> method gets the job done, but it is good to know additional ways of looping over an array of JSON. Also, don’t forget to add a <span class="jsx-3120878690"><code>key</code></span> prop unique to the JSX element to help with performance.</p>
<p>38</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
