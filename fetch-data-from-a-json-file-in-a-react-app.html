<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>fetch-data-from-a-json-file-in-a-react-app</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span data-css-15b13by="" aria-hidden="false">Get started</span></p>
<p><span data-css-15b13by="" aria-hidden="false">Log in</span></p>
<p><img src="../../pluralsight.imgix.net/author/lg/c7859b4f-a0e9-4f74-8559-62f43bdcabea.jpeg" alt="Author avatar" class="jsx-3841407315" /></p>
<p>Gaurav Singhal</p>
<h1 id="fetch-data-from-a-json-file-in-a-react-app">Fetch Data from a JSON File in a React App</h1>
<h3 id="gaurav-singhal">Gaurav Singhal</h3>
<ul>
<li><p>Oct 7, 2020</p></li>
<li><p>5 Min read</p></li>
<li><p>151,400 Views</p></li>
<li><p>Oct 7, 2020</p></li>
<li><p><span class="jsx-3759398792" itemprop="timeRequired">5 Min</span> read</p></li>
<li><p>151,400 Views</p></li>
</ul>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Front End Web Development</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">Client-side Frameworks</span></p>
<p><span class="jsx-3759398792"></span></p>
<p><span data-css-1997kh1="">React</span></p>
<p>Introduction</p>
<p>168</p>
<ul>
<li><a href="#module-introduction" class="menu-link">Introduction</a></li>
<li><a href="#module-settingupalocaljsonfile" class="menu-link">Setting Up a Local JSON file</a></li>
<li><a href="#module-consuminglocaljsondatausingfetchapi" class="menu-link">Consuming Local JSON Data Using Fetch API</a></li>
<li><a href="#module-loadingdataintothecomponent" class="menu-link">Loading Data into the Component</a></li>
<li><a href="#module-conclusion" class="menu-link">Conclusion</a></li>
<li><a href="#top" class="menu-link">Top</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>Creating <em>API mockups</em> for local testing and development allows you to work in a faster development environment. One way to implement an API mockup is to copy the JSON data to a local file in your project directory and make your fetch or GET calls to that file instead of the real database. As fetching data from an external source is still an asynchronous task, there are a number of errors you can run into while loading data from a JSON file. This guide will demonstrate how to correctly fetch data from a JSON file in your React app and consume it on the frontend.</p>
<h2 id="setting-up-a-local-json-file">Setting Up a Local JSON file</h2>
<p>In a blank Create React App project, create a local JSON file named <span class="jsx-3120878690"><code>data.json</code></span> inside the <span class="jsx-3120878690"><code>public</code></span> directory. Your Fetch API calls made from a React component always looks for files or any other relevant assets inside this <span class="jsx-3120878690"><code>public</code></span> directory. Create-React-App doesn’t put your assets automatically inside this directory during compilation so you have to do this manually.</p>
<p>Next, put some dummy JSON data inside this file. For demonstration purposes, the JSON data used in the example below is generated from <a href="https://www.json-generator.com/">JSON Generator</a>. If you are using your own JSON, ensure that it is correctly formatted.</p>
<h2 id="consuming-local-json-data-using-fetch-api">Consuming Local JSON Data Using Fetch API</h2>
<p>The next step you need to perform is fetching this data correctly. Create a method <span class="jsx-3120878690"><code>getData()</code></span> that fetches local JSON using JavaScript’s fetch API and call it inside <span class="jsx-3120878690"><code>useEffect</code></span> as shown below.</p>
<pre><code>1  const getData=()=&gt;{
2    fetch(&#39;data.json&#39;
3    ,{
4      headers : { 
5        &#39;Content-Type&#39;: &#39;application/json&#39;,
6        &#39;Accept&#39;: &#39;application/json&#39;
7       }
8    }
9    )
10      .then(function(response){
11        console.log(response)
12        return response.json();
13      })
14      .then(function(myJson) {
15        console.log(myJson);
16      });
17  }
18  useEffect(()=&gt;{
19    getData()
20  },[])</code></pre>
<p>javascript</p>
<p>The path to your JSON file should be either <span class="jsx-3120878690"><code>'data.json'</code></span> or <span class="jsx-3120878690"><code>'./data.json'</code></span>. Other relative paths might land you a 404 error while trying to access that resource. You also need to pass in some <span class="jsx-3120878690"><code>headers</code></span> indicating the <span class="jsx-3120878690"><code>Content-Type</code></span> and <span class="jsx-3120878690"><code>Accept</code></span> as <span class="jsx-3120878690"><code>application/json</code></span> to tell your client that you are trying to access and accept some JSON resource from a server.</p>
<h2 id="loading-data-into-the-component">Loading Data into the Component</h2>
<p>Create a state using the <span class="jsx-3120878690"><code>useState</code></span> hook to store this data and render it on the DOM.</p>
<pre><code>1const [data,setData]=useState([]);</code></pre>
<p>javascript</p>
<p>Assign the JSON data inside your fetch call to this state variable.</p>
<pre><code>1const getData=()=&gt;{
2    fetch(&#39;data.json&#39;
3    ,{
4      headers : { 
5        &#39;Content-Type&#39;: &#39;application/json&#39;,
6        &#39;Accept&#39;: &#39;application/json&#39;
7       }
8    }
9    )
10      .then(function(response){
11        console.log(response)
12        return response.json();
13      })
14      .then(function(myJson) {
15        console.log(myJson);
16        setData(myJson)
17      });
18  }</code></pre>
<p>javascript</p>
<p>Depending on your JSON’s structure, put relevant checks inside the <span class="jsx-3120878690"><code>return</code></span> statement of your component before rendering or loading this data. The GET call for your JSON resource is made when the component mounts on the DOM. However, since it is an asynchronous task your return statement is executed before the API call is made. Because you are updating the state after fetching the required data, a re-rendering of the component updates the DOM with JSON data stored inside the state. The JSON used here is an array of objects, so the relevant check would be to check if the state exists and consequently verify if it has a non-zero length as shown below.</p>
<pre><code>1 return (
2    &lt;div className=&quot;App&quot;&gt;
3     {
4       data &amp;&amp; data.length&gt;0 &amp;&amp; data.map((item)=&gt;&lt;p&gt;{item.about}&lt;/p&gt;)
5     }
6    &lt;/div&gt;
7 );</code></pre>
<p>jsx</p>
<p>If your JSON returns an object, simply check your state to be not null at the time of outputting it, otherwise you might get an error.</p>
<p>Have a look at the entire code below.</p>
<pre><code>1import React,{useState,useEffect} from &#39;react&#39;;
2import &#39;./App.css&#39;;
3
4function App() {
5  const [data,setData]=useState([]);
6  const getData=()=&gt;{
7    fetch(&#39;data.json&#39;
8    ,{
9      headers : { 
10        &#39;Content-Type&#39;: &#39;application/json&#39;,
11        &#39;Accept&#39;: &#39;application/json&#39;
12       }
13    }
14    )
15      .then(function(response){
16        console.log(response)
17        return response.json();
18      })
19      .then(function(myJson) {
20        console.log(myJson);
21        setData(myJson)
22      });
23  }
24  useEffect(()=&gt;{
25    getData()
26  },[])
27  return (
28    &lt;div className=&quot;App&quot;&gt;
29     {
30       data &amp;&amp; data.length&gt;0 &amp;&amp; data.map((item)=&gt;&lt;p&gt;{item.about}&lt;/p&gt;)
31     }
32    &lt;/div&gt;
33  );
34}
35
36export default App;</code></pre>
<p>javascript</p>
<h2 id="conclusion">Conclusion</h2>
<p>You can also use a powerful third-party library called Axios to make GET calls to a local JSON file instead of fetch API. By loading data directly from a local JSON file you can save your server from tons of unnecessary calls in local development. Alternately, by saving the JSON file as a regular JavaScript file and exporting the entire object globally, you can use it inside any component and save a considerable amount of development time when working with external APIs.</p>
<p>168</p>
<p><a href="https://www.pluralsight.com/product/paths"><span data-css-15b13by="" aria-hidden="false">LEARN MORE</span></a></p>
</body>
</html>
